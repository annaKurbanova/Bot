from telegram import ReplyKeyboardMarkup, Update
from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes

# –¢–µ–∫—Å—Ç—ã –¥–ª—è –∫–Ω–æ–ø–æ–∫
button_texts = {
    "–û –Ω–∞—Å": (
        "–û–û–û <BTL> ‚Äì —ç—Ç–æ –¥–∏–Ω–∞–º–∏—á–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—é—â–∞—è—Å—è –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —É—Å–ª—É–≥–∏ "
        "–≤ –æ–±–ª–∞—Å—Ç–∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∏. –ú—ã —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º—Å—è –Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ü–µ–ø–æ—á–∫–∏ –ø–æ—Å—Ç–∞–≤–æ–∫ –æ—Ç –ø–æ–∏—Å–∫–∞ "
        "–ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –¥–æ –¥–æ—Å—Ç–∞–≤–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –†–æ—Å—Å–∏–π—Å–∫—É—é –§–µ–¥–µ—Ä–∞—Ü–∏—é.\n\n"
        "üÜí –≤—ã–∫—É–ø –æ—Ç 0%\nüëç –¥–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç 0,5 –¥–æ–ª–ª–∞—Ä–∞\nüëç –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞ –æ—Ç 3000 —Ä\nü§¨ –ø–µ—Ä–µ–≤–æ–¥ –≤ –ö–∏—Ç–∞–π 1%\n\n"
        "[–ù–∞—à —Å–∞–π—Ç](http://9339-logistics.ru/)"
    ),
    "–£—Å–ª—É–≥–∏": (
        "–ù–∞—à–∏ –£—Å–ª—É–≥–∏:\n\n"
        "1Ô∏è‚É£ –ü–æ–∏—Å–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤: –ú—ã –ø–æ–º–æ–≥–∞–µ–º –Ω–∞—à–∏–º –∫–ª–∏–µ–Ω—Ç–∞–º –Ω–∞—Ö–æ–¥–∏—Ç—å –Ω–∞–¥–µ–∂–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∑–∞ —Ä—É–±–µ–∂–æ–º, –ø—Ä–æ–≤–æ–¥–∏–º –∞–Ω–∞–ª–∏–∑ "
        "—Ä—ã–Ω–∫–∞ –∏ –æ—Ü–µ–Ω–∫—É –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤.\n"
        "2Ô∏è‚É£ –ó–∞–∫—É–ø —Ç–æ–≤–∞—Ä–æ–≤: –ú—ã –æ—Ä–≥–∞–Ω–∏–∑—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–∫—É–ø–æ–∫ –æ—Ç –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤ –æ —Ü–µ–Ω–∞—Ö –¥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è.\n"
        "3Ô∏è‚É£ –î–µ–Ω–µ–∂–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã: –ë—ã—Å—Ç—Ä—ã–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.\n"
        "4Ô∏è‚É£ –¢–∞–º–æ–∂–µ–Ω–Ω—ã–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è: –ü–æ–º–æ—â—å –≤ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ –≤—Å–µ—Ö —Ç–∞–º–æ–∂–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä.\n"
        "5Ô∏è‚É£ –õ–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–∑–∫–∏ –≤ –†–§: –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç–∞–≤–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤, –≤–∫–ª—é—á–∞—è –º–æ—Ä—Å–∫–∏–µ, –≤–æ–∑–¥—É—à–Ω—ã–µ –∏ –∞–≤—Ç–æ –ø–µ—Ä–µ–≤–æ–∑–∫–∏.\n\n"
        "–ö–ê–†–ì–ûüá∑üá∫ BTL-logistics üá®üá≥ –î–æ—Å—Ç–∞–≤–∫–∞ –∏–∑ –ö–∏—Ç–∞—è\n"
        "üî• –í—ã–∫—É–ø –æ—Ç 0%\nüî• –î–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç 0,5 –¥–æ–ª–ª–∞—Ä–∞\nüî• –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞ –æ—Ç 3000 —Ä—É–±\nüî• –ü–µ—Ä–µ–≤–æ–¥ –≤ –ö–∏—Ç–∞–π 1%\n\n"
        "–°—Ä–æ–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–æ –ú–æ—Å–∫–≤—ã (–ì—É–∞–Ω—á–∂–æ—É - –†–æ—Å—Å–∏—è):\n"
        "‚úàÔ∏è –û–±—ã—á–Ω–∞—è –∞–≤–∏–∞: 9-12 –¥–Ω–µ–π\nüõª –≠–∫—Å–ø—Ä–µ—Å—Å –∞–≤—Ç–æ: 13-15 –¥–Ω–µ–π\nüõª –û–±—ã—á–Ω–æ–µ –∞–≤—Ç–æ: 18-25 –¥–Ω–µ–π"
    ),
    "–û—Ç–∑—ã–≤—ã": "–û—Ç–∑—ã–≤—ã –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∑–¥–µ—Å—å: [VK](https://vk.com/topic-228005427_53134904)",
    "–ö–æ–Ω—Ç–∞–∫—Ç—ã": (
        "–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–∞—à–∏—Ö —É—Å–ª—É–≥–∞—Ö –∏–ª–∏ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏:\n\n"
        "üì± [–°–∞–π—Ç](http://9339-logistics.ru/)\n"
        "üì± [VK](https://vk.com/cargo9339)\n"
        "üì± [WhatsApp](https://wa.me/+8615545033334)\n"
        "üì± [Instagram](http://instagram.com/9339-cargo)"
    )
}

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start –¥–ª—è –ø–æ–∫–∞–∑–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    keyboard = [[key for key in button_texts]]
    reply_markup = ReplyKeyboardMarkup(keyboard, resize_keyboard=True)
    await update.message.reply_text("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª:", reply_markup=reply_markup)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã /edit_text <–Ω–∞–∑–≤–∞–Ω–∏–µ> <–Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç>
async def edit_text(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    args = context.args
    if len(args) < 2:
        await update.message.reply_text("–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ: /edit_text <–Ω–∞–∑–≤–∞–Ω–∏–µ> <–Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç>")
        return
    
    button_name = args[0]
    new_text = ' '.join(args[1:])
    
    if button_name in button_texts:
        button_texts[button_name] = new_text
        await update.message.reply_text(f"–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ '{button_name}' –æ–±–Ω–æ–≤–ª–µ–Ω.")
    else:
        await update.message.reply_text("–¢–∞–∫–æ–π –∫–Ω–æ–ø–∫–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.")

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫
async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    text = update.message.text
    if text in button_texts:
        await update.message.reply_text(button_texts[text], parse_mode="Markdown")

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
def main() -> None:
    application = Application.builder().token("—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞").build()
    
    application.add_handler(CommandHandler('start', start))
    application.add_handler(CommandHandler('edit_text', edit_text))
    application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))

    application.run_polling()

if __name__ == "__main__":
    main()
